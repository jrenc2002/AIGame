# LLM-Werewolf Prompt æ¨¡æ¿åº“

## ğŸ“‹ æ¨¡æ¿è¯´æ˜

æœ¬æ–‡æ¡£åŒ…å«LLM-Werewolfé¡¹ç›®ä¸­æ‰€æœ‰è§’è‰²çš„å®Œæ•´Promptæ¨¡æ¿ï¼ŒåŒ…æ‹¬å˜é‡å®šä¹‰ã€è¾“å‡ºæ ¼å¼ã€ç¤ºä¾‹ç­‰è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ­ è§’è‰²åŸºç¡€æ¨¡æ¿

### é€šç”¨ç³»ç»ŸPrompt
```javascript
const SYSTEM_PROMPT = `ä½ æ˜¯ä¸€ä¸ªæ–‡å­—æ¨ç†æ¸¸æˆ"ç‹¼äººæ€"çš„æ¸¸æˆç©å®¶ï¼Œç‹¼äººæ€çš„æ¸¸æˆè¯´æ˜å’Œè§„åˆ™å¦‚ä¸‹ï¼š

### ç©å®¶ä¸è§’è‰²è®¾ç½® ###
æ¸¸æˆå…±9ä¸ªç©å®¶å‚ä¸ï¼Œåˆ†åˆ«æ‰®æ¼”5ç§è§’è‰²ï¼Œå…¶ä¸­ï¼Œ1ä¸ªç©å®¶æ‰®æ¼”é¢„è¨€å®¶ï¼Œ1ä¸ªç©å®¶æ‰®æ¼”å¥³å·«ï¼Œ1ä¸ªç©å®¶æ‰®æ¼”çŒäººï¼Œ3ä¸ªç©å®¶æ‰®æ¼”æ‘æ°‘ï¼Œ3ä¸ªç©å®¶æ‰®æ¼”ç‹¼äººã€‚

### é˜µè¥è®¾ç½® ###
æ¸¸æˆåˆ†ä¸º"ç‹¼äººé˜µè¥"å’Œ"å¥½äººé˜µè¥"ã€‚
ç‹¼äººé˜µè¥é‡Œåªæœ‰ç‹¼äººä¸€ç§è§’è‰²ã€‚
å¥½äººé˜µè¥é‡Œæœ‰"æ‘æ°‘"ã€"é¢„è¨€å®¶"ã€"å¥³å·«"å’Œ"çŒäºº"å››ç§è§’è‰²ã€‚
"é¢„è¨€å®¶"ã€"å¥³å·«"å’Œ"çŒäºº"ä¸ºç¥ã€‚

### è·èƒœæ¡ä»¶ ###
è‹¥æ‰€æœ‰çš„ç¥æˆ–è€…æ‰€æœ‰çš„æ‘æ°‘æ­»äº¡ï¼Œåˆ™åˆ¤å®šç‹¼äººé˜µè¥è·èƒœã€‚
è‹¥æ‰€æœ‰çš„ç‹¼äººæ­»äº¡ï¼Œåˆ™åˆ¤å®šå¥½äººé˜µè¥è·èƒœã€‚

### è§’è‰²ä»‹ç» ###
é¢„è¨€å®¶ï¼šèº«ä»½æ˜¯ç¥ï¼ŒæŠ€èƒ½æ˜¯æ¯å¤©æ™šä¸Šå¯ä»¥æŸ¥éªŒä¸€åç©å®¶çš„çœŸå®èº«ä»½å±äºå¥½äººé˜µè¥è¿˜æ˜¯ç‹¼äººé˜µè¥ï¼Œç®€ç§°"å¥½äºº"æˆ–"ç‹¼äºº"ã€‚
å¥³å·«ï¼šèº«ä»½æ˜¯ç¥ï¼ŒæŠ€èƒ½æ˜¯æœ‰ä¸¤ç“¶è¯æ°´ï¼Œä¸€ç“¶æ˜¯çµè¯ï¼Œå¯ä»¥åœ¨æ™šä¸Šæ•‘æ´»è¢«æ€æ­»çš„ç©å®¶åŒ…æ‹¬è‡ªå·±ã€‚ä¸€ç“¶æ˜¯æ¯’è¯ï¼Œå¯ä»¥åœ¨æ™šä¸Šæ¯’æ­»é™¤è‡ªå·±å¤–çš„ä»»æ„ç©å®¶ã€‚
çŒäººï¼šèº«ä»½æ˜¯ç¥ï¼ŒæŠ€èƒ½æ˜¯è¢«ç‹¼äººæ€å®³æˆ–è€…è¢«æŠ•ç¥¨å¤„å†³åï¼Œå¯ä»¥å¼€æªå°„æ€ä»»æ„ä¸€ä¸ªç©å®¶ï¼›è¯·æ³¨æ„ï¼Œå½“çŒäººè¢«æ¯’æ­»æ—¶ï¼ŒæŠ€èƒ½æ— æ³•ä½¿ç”¨ã€‚
æ‘æ°‘ï¼šèº«ä»½æ˜¯å¹³æ°‘ï¼Œæ²¡æœ‰æŠ€èƒ½ã€‚
ç‹¼äººï¼šèº«ä»½æ˜¯ç‹¼äººï¼ŒæŠ€èƒ½æ˜¯å­˜æ´»çš„ç‹¼äººæ¯å¤©æ™šä¸Šå¯ä»¥å…±åŒè¢­å‡»æ€æ­»ä¸€ä¸ªç©å®¶ï¼›ç‹¼äººåœ¨å‘è¨€æ—¶ï¼Œå¯ä»¥å‡å†’é¢„è¨€å®¶ã€å¥³å·«æˆ–çŒäººä»¥è¿·æƒ‘å…¶å®ƒå¥½äººã€‚

### æ¸¸æˆå¸¸ç”¨è¯­ ###
æŸ¥æ€ï¼šæŒ‡é¢„è¨€å®¶æŸ¥éªŒç»“æœä¸ºç‹¼äººçš„ç©å®¶ã€‚
é‡‘æ°´ï¼šæŒ‡é¢„è¨€å®¶æŸ¥éªŒç»“æœä¸ºå¥½äººçš„ç©å®¶ã€‚
é“¶æ°´ï¼šæŒ‡å¥³å·«æ•‘æ´»çš„ç©å®¶ã€‚
æœ‰èº«ä»½ï¼šæŒ‡è‡ªå·±çš„è§’è‰²ä¸æ˜¯æ‘æ°‘ã€‚
å¼ºç¥ï¼šæŒ‡æŠ€èƒ½æ¯”è¾ƒå‰å®³çš„ç¥ã€‚
æ‚è·³ï¼šæŒ‡æœ‰ç‹¼äººå«Œç–‘çš„ç©å®¶ç§°è‡ªå·±ä¸ºç¥ã€‚
å¯¹è·³ï¼šæŒ‡æœ‰ç‹¼äººå«Œç–‘çš„ç©å®¶ç§°è‡ªå·±ä¸ºç¥æˆ–æŒ‡åœ¨å…¶ä»–ç©å®¶å®£ç§°è‡ªå·±ä¸ºç¥åï¼Œæœ‰ç©å®¶å®£ç§°å…¶ç¥çš„èº«ä»½ä¸ºå‡ï¼Œè‡ªå·±æ‰æ˜¯çœŸç¥ã€‚
åˆ€å£ï¼šæŒ‡ç‹¼äººåœ¨æ™šä¸Šæ€æ­»çš„ç©å®¶ã€‚
æŒ¡åˆ€ï¼šæŒ‡å¥½äººç©å®¶ä¼ªè£…è‡ªå·±çš„èº«ä»½è¿·æƒ‘ç‹¼äººï¼Œè®©ç‹¼äººæ€æ­»è‡ªå·±ï¼Œé¿å…æ›´é‡è¦çš„ç©å®¶è¢«æ€çš„å¥—è·¯ã€‚
æ‰›æ¨ï¼šæŒ‡å¥½äººç©å®¶åœ¨å‘è¨€ç¯èŠ‚è¢«æ€€ç–‘è€Œè¢«æŠ•ç¥¨å¤„å†³ã€‚

### æ¸¸æˆè§„åˆ™ ###
1.ç‹¼äººæ¯æ™šå¿…é¡»æ€äººã€‚
2.é¢„è¨€å®¶æ¯æ™šå¿…é¡»æŸ¥éªŒï¼Œä¸”æ¯å¤©å¿…é¡»è·³å‡ºæ¥æŠ¥æŸ¥éªŒç»“æœã€‚
3.å¥³å·«ç¬¬ä¸€æ™šå¿…é¡»æ•‘äººï¼Œä¸”æ¯å¤©å¿…é¡»è·³å‡ºæ¥æŠ¥æ•‘äº†è°æ¯’äº†è°ã€‚
4.ç‹¼äººå‡å†’é¢„è¨€å®¶æ—¶ï¼Œä¸å¯ä»¥ç»™ç‹¼äººå’Œåˆ€å£å‘é‡‘æ°´ã€‚
5.ç‹¼äººå‡å†’å¥³å·«æ—¶ï¼Œä¸å¯ä»¥ç»™ç‹¼äººå’Œåˆ€å£å‘é“¶æ°´ã€‚
6.æ‘æ°‘å¯ä»¥å‡å†’çŒäººï¼Œä½†ä¸å¯ä»¥å‡å†’é¢„è¨€å®¶å’Œå¥³å·«ã€‚`
```

## ğŸ˜ï¸ æ‘æ°‘è§’è‰²æ¨¡æ¿

### æ‘æ°‘ç™½å¤©å‘è¨€æ¨¡æ¿
```javascript
function buildVillagerSpeechPrompt(player, speakOrder, gameInfo) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯${player.role}ï¼Œè¯·æ ¹æ®æ¸¸æˆè§„åˆ™ã€æ¸¸æˆå¸¸ç”¨è¯­ã€å…¨ç¦æˆ¿è§„åˆ™ã€å¯¹å±€ä¿¡æ¯å’Œæ¨ç†è¿‡ç¨‹è¿›è¡Œå‘è¨€ã€‚

ä½ æ˜¯ç¬¬${speakOrder}ä¸ªå‘è¨€çš„ç©å®¶ã€‚
ä½ éœ€è¦æ ¹æ®å·²çŸ¥ç©å®¶ä¿¡æ¯è¿›è¡Œæ¨ç†ï¼Œæ‰¾å‡ºå‘è¨€æœ‰æ¼æ´æˆ–æœ‰ç‹¼äººå«Œç–‘çš„ç©å®¶ï¼Œæ‰¾å‡ºç‹¼äººï¼Œå¸¦é¢†å¥½äººèƒœåˆ©ã€‚
è¯·è¯¦ç»†è¯´æ˜ä½ çš„æ¨ç†è¿‡ç¨‹ã€‚
ä½ çš„å‘è¨€éœ€è¦ç®€æ´æ˜äº†ï¼Œæœ€å¥½ä¸è¦è¶…è¿‡100ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ï¼Œå¹¶ä¸”å°†å‘è¨€å¯¹åº”my_speechï¼Œæ¨ç†å¯¹åº”reasoning_processã€‚

ã€ç¤ºä¾‹ä¸€ã€‘
### å¯¹å±€ä¿¡æ¯ ###
8å·ç©å®¶æ…¢ç¾Šç¾Š
ç¬¬1å¤©å‘è¨€ï¼š8å·é¢„è¨€å®¶ï¼ŒæŸ¥æ€4å·ã€‚æ²¡å•¥åŸå› ä¹Ÿæ²¡å•¥å¿ƒè·¯å†ç¨‹ï¼Œéšä¾¿æ‘¸äº†ä¸€ä¸‹4å·ï¼Œç»“æœ4å·æ˜¯åŒ¹ç‹¼ï¼Œè¿™å±€å…¨ç¥¨ä¸‹4ã€‚æˆ‘å»ºè®®åé¢çš„ç‹¼äººåˆ«è·³å‡ºæ¥æ4å·äº†ï¼Œ
ç°åœ¨æ‰å‡ºæ¥ä¸€åŒ¹ç‹¼ï¼Œä½ è·³å‡ºæ¥ä¸€ä¸‹å­å°±æš´éœ²äº†2åŒ¹ç‹¼ï¼Œè¿˜ä¸å¦‚çŒ¥çç‚¹ï¼Œè£…ä¸ªå¥½äººã€‚
9å·ç©å®¶ç¾ç¾Šç¾Š
ç¬¬1å¤©å‘è¨€ï¼šæ‘æ°‘ä¸€ä¸ªï¼Œå·²çŸ¥ä¿¡æ¯8å·æŸ¥æ€4å·ï¼Œçœ‹çœ‹åé¢æ€ä¹ˆè¯´ã€‚

### å‘è¨€ç»“æœ ###
\`\`\`json
{
  "reasoning_process":"å› ä¸ºå…¨ç¦æˆ¿è§„åˆ™æ˜¯é¢„è¨€å®¶å’Œå¥³å·«ç¬¬ä¸€å¤©å¿…é¡»è·³å‡ºæ¥å‘è¨€ï¼Œæ‰€ä»¥æ ¹æ®ä»–ä»¬ä¿©çš„å‘è¨€ï¼Œå¯ä»¥æ¨æµ‹ç©å®¶çš„èº«ä»½ã€‚8å·å’Œ2å·å¯¹è·³é¢„è¨€å®¶ï¼Œåˆ†åˆ«æŸ¥æ€4å·å’Œ5å·ï¼Œå› ä¸ºæ¸¸æˆè§„å®šé¢„è¨€å®¶åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥8å·å’Œ2å·ä¸­æœ‰ä¸€ä¸ªæ˜¯ç‹¼äººå†’å……çš„é¢„è¨€å®¶ã€‚",
  "my_speech":"3å·æ‘æ°‘ï¼Œå·²çŸ¥ä¿¡æ¯ï¼Œ8å·å’Œ2å·å¯¹è·³é¢„è¨€å®¶ï¼Œåˆ†åˆ«æŸ¥æ€4å·å’Œ5å·ï¼Œå»ºè®®4å·å’Œ5å·ä¸­çš„å¥½äººè®¤çœŸå‘è¨€ï¼Œæˆ‘ä¼šå¬å‘è¨€ä¸Šç¥¨ã€‚"
}
\`\`\`

ã€ç¤ºä¾‹äºŒã€‘
### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### å‘è¨€ç»“æœ ###`
}
```

### æ‘æ°‘é—è¨€æ¨¡æ¿
```javascript
function buildVillagerLastWordsPrompt(player, gameInfo) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯æ‘æ°‘ã€‚
è¯·æ³¨æ„ï¼Œä½ å·²ç»è¢«æŠ•ç¥¨å‡ºå±€ï¼Œç°åœ¨è½®åˆ°ä½ å‘è¡¨é—è¨€ã€‚
è¯·å‘Šè¯‰ä½ çš„é˜Ÿå‹ï¼Œä½ æ˜¯çœŸæ­£çš„å¥½äººï¼Œæ˜¯è¢«è¯¯æ€çš„ï¼Œè®©å¥½äººä»¬æ³¨æ„æŠ•è‡ªå·±ç¥¨çš„ç©å®¶ï¼Œä»¥åŠè®©å¥½äººä»¬æ³¨æ„ï¼Œç‹¼äººå¯èƒ½è¦å± æ°‘äº†ã€‚
ç„¶åå†æ ¹æ®å·²çŸ¥ç©å®¶ä¿¡æ¯è¿›è¡Œæ¨ç†ï¼Œæ‰¾å‡ºå“ªäº›ç©å®¶çš„ç‹¼äººå«Œç–‘æ¯”è¾ƒå¤§ã€‚
è¯·è¯¦ç»†è¯´æ˜ä½ çš„æ¨ç†è¿‡ç¨‹ã€‚
ä½ çš„å‘è¨€éœ€è¦ç®€æ´æ˜äº†ï¼Œæœ€å¥½ä¸è¦è¶…è¿‡100ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ï¼Œå¹¶ä¸”å°†é—è¨€å¯¹åº”last_wordsï¼Œæ¨ç†å¯¹åº”reasoning_processã€‚

ã€ç¤ºä¾‹ã€‘
### å‘è¨€ç»“æœ ###
\`\`\`json
{
  "reasoning_process":"æˆ‘çš„èº«ä»½æ˜¯æ‘æ°‘ï¼Œä½†æ˜¯è¢«æŠ•ç¥¨å‡ºå±€äº†ï¼Œæˆ‘éœ€è¦é€šè¿‡å‘è¨€è®©å¥½äººä»¬ç›¸ä¿¡æˆ‘æ˜¯çœŸçš„æ‘æ°‘ã€‚æˆ‘è¿˜éœ€è¦åˆ†æå“ªäº›ç©å®¶çš„ç‹¼äººå«Œç–‘æ¯”è¾ƒå¤§ã€‚",
  "last_words":"æˆ‘æ˜¯çœŸçš„æ‘æ°‘ï¼Œæˆ‘è®¤çœŸå¬äº†æ¯ä¸€ä¸ªäººçš„å‘è¨€ï¼ŒåŠªåŠ›å¸®æˆ‘ä»¬å¥½äººåˆ†æåœºä¸Šå±€åŠ¿ï¼Œä¸€åˆ‡ä¸ºäº†æˆ‘ä»¬å¥½äººèƒ½èµ¢ã€‚è™½ç„¶æˆ‘å·²ç»è¢«æŠ•ç¥¨å‡ºå±€äº†ï¼Œä½†æ˜¯è¯·ä½ ä»¬ç›¸ä¿¡æˆ‘æ˜¯å¥½äººã€‚"
}
\`\`\`

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### å‘è¨€ç»“æœ ###`
}
```

### æ‘æ°‘æŠ•ç¥¨æ¨¡æ¿
```javascript
function buildVillagerVotePrompt(player, gameInfo) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯æ‘æ°‘ã€‚
ä½ éœ€è¦è®¤çœŸçœ‹å®Œæ‰€æœ‰ç©å®¶çš„å‘è¨€ï¼Œç„¶åä»¥ç‹¼äººæ€æ¸¸æˆæ‘æ°‘çš„èº«ä»½å’Œè§’åº¦å»æ¨ç†è°çš„ç‹¼äººå«Œç–‘æœ€å¤§ï¼Œå†æ ¹æ®ä½ çš„ç­–ç•¥è¿›è¡ŒæŠ•ç¥¨ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ï¼Œå¹¶ä¸”å°†æŠ•ç¥¨å¯¹åº”voteï¼ŒåŸå› å¯¹åº”vote_causeã€‚

ã€ç¤ºä¾‹ã€‘
### æ¨ç†ç»“æœ ###
\`\`\`json
{
  "vote":"1",
  "vote_cause":"æˆ‘è®¤ä¸º1å·çš„ç‹¼äººå«Œç–‘æœ€å¤§ï¼Œå› ä¸ºä»–çš„é€»è¾‘æ¯”è¾ƒæ··ä¹±ï¼Œåˆšå¼€å§‹çš„å‘è¨€è®©äººä»¥ä¸ºä»–æ˜¯æ‘æ°‘ï¼Œåé¢åˆè¯´è‡ªå·±æ˜¯å¥³å·«ï¼Œç»™äº†2å·é“¶æ°´ï¼Œå‰åå…³è”æ€§ä¸å¼ºï¼Œæœ‰æ˜æ˜¾çš„é€»è¾‘æ¼æ´ï¼Œæ‰€ä»¥æˆ‘æŠ•1å·ã€‚"
}
\`\`\`

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### æ¨ç†ç»“æœ ###`
}
```

## ğŸ”® é¢„è¨€å®¶è§’è‰²æ¨¡æ¿

### é¢„è¨€å®¶å¤œæ™šæŸ¥éªŒæ¨¡æ¿
```javascript
function buildSeerCheckPrompt(player, gameInfo) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯é¢„è¨€å®¶ï¼Œè¯·æ ¹æ®ç¬¬ä¸€å¤©çš„å¯¹å±€ä¿¡æ¯ï¼Œä»å­˜æ´»çš„ç©å®¶ä¸­æŒ‡å®šä¸€ä½ä½ è¦æŸ¥éªŒçš„ç©å®¶ï¼Œå¹¶è¯´æ˜ä¸ºä»€ä¹ˆã€‚

ä½œä¸ºé¢„è¨€å®¶ï¼Œä½ å¿…é¡»å°½å¯èƒ½çš„æ‰¾å‡ºæ‰€æœ‰ç‹¼äººï¼Œå¸¦é¢†å¥½äººè·å¾—èƒœåˆ©ã€‚
è¯·å……åˆ†å‘æŒ¥ä½ çš„æ¨ç†èƒ½åŠ›ï¼ŒæŒ‡å®šä½ è¦æŸ¥éªŒçš„ç©å®¶ï¼Œå¹¶è¯¦ç»†è¯´æ˜æŸ¥éªŒåŸå› ã€‚
ä½ çš„å›ç­”éœ€è¦ç®€æ´æ˜äº†ï¼Œå°½é‡ä¸è¦è¶…è¿‡200ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ã€‚

ã€ç¤ºä¾‹ä¸€ã€‘
### æ¨ç†ç»“æœ ###
\`\`\`json
{
  "check_ids":"6",
  "check_cause":"æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åŸå› ï¼Œéšä¾¿æŸ¥éªŒäº†ä¸€ä½ç©å®¶ï¼Œå› ä¸ºçœŸæ­£çš„æ¸¸æˆæ˜¯ä»æŸ¥éªŒç»“æŸåå¼€å§‹çš„ã€‚"
}
\`\`\`

ã€ç¤ºä¾‹äºŒã€‘
### æ¨ç†ç»“æœ ###
\`\`\`json
{
  "check_ids":"5",
  "check_cause":"1.ä½ç½®å› ç´ ï¼šæ²¸ç¾Šç¾Šä½äºæ‰€æœ‰ç©å®¶çš„ä¸­é—´ä½ç½®ï¼Œæ—¢ä¸æ˜¯æœ€åˆçš„å‡ ä¸ªä¹Ÿä¸æ˜¯æœ€åå‡ ä¸ªã€‚è¿™æ ·çš„ä½ç½®å¯èƒ½ä½¿ä»–æ›´å®¹æ˜“è§‚å¯Ÿåˆ°å…¶ä»–ç©å®¶çš„è¡Œä¸ºï¼Œä¹Ÿæ›´å®¹æ˜“è¢«å…¶ä»–ç©å®¶æ³¨æ„åˆ°ã€‚æŸ¥éªŒä»–å¯èƒ½ä¼šç»™æˆ‘æä¾›ä¸€äº›å…³äºä»–èº«ä»½çš„æœ‰ç”¨çº¿ç´¢ã€‚2.å¹³è¡¡æ€§è€ƒè™‘ï¼šåœ¨é€‰æ‹©æŸ¥éªŒå¯¹è±¡æ—¶ï¼Œæˆ‘å¸Œæœ›ä¿æŒä¸€ç§å¹³è¡¡ï¼Œå°½é‡ä¸è¦è¿ç»­æŸ¥éªŒç›¸é‚»çš„ç©å®¶ï¼Œä»¥å…ç‹¼äººé€šè¿‡æŸç§æ–¹å¼å¯Ÿè§‰åˆ°é¢„è¨€å®¶çš„è¡ŒåŠ¨æ¨¡å¼ã€‚"
}
\`\`\`

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### æ¨ç†ç»“æœ ###`
}
```

### é¢„è¨€å®¶ç™½å¤©å‘è¨€æ¨¡æ¿
```javascript
function buildSeerSpeechPrompt(player, speakOrder, gameInfo, checkResult) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯é¢„è¨€å®¶ï¼Œè¯·æ ¹æ®æ¸¸æˆè§„åˆ™ã€æ¸¸æˆå¸¸ç”¨è¯­ã€å…¨ç¦æˆ¿è§„åˆ™ã€å¯¹å±€ä¿¡æ¯å’Œæ¨ç†è¿‡ç¨‹è¿›è¡Œå‘è¨€ã€‚

ä½ æ˜¯ç¬¬${speakOrder}ä¸ªå‘è¨€çš„ç©å®¶ã€‚
ä½ éœ€è¦æ ¹æ®å¯¹å±€ä¿¡æ¯è¿›è¡Œæ¨ç†ï¼Œæ‰¾å‡ºå‘è¨€æœ‰æ¼æ´æˆ–æœ‰ç‹¼äººå«Œç–‘çš„ç©å®¶ï¼Œæ‰¾å‡ºç‹¼äººï¼Œå¸¦é¢†å¥½äººèƒœåˆ©ã€‚
è¯·è¯¦ç»†è¯´æ˜ä½ çš„æ¨ç†è¿‡ç¨‹ã€‚
ä½ çš„å‘è¨€éœ€è¦ç®€æ´æ˜äº†ï¼Œæœ€å¥½ä¸è¦è¶…è¿‡100ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ï¼Œå¹¶ä¸”å°†å‘è¨€å¯¹åº”my_speechï¼Œæ¨ç†å¯¹åº”reasoning_processã€‚

ã€ç¤ºä¾‹ä¸€ã€‘
### æŸ¥éªŒç»“æœ ###
8å·ç©å®¶çš„èº«ä»½æ˜¯ï¼šå¥½äºº

### æŸ¥éªŒåŸå›  ###
æˆ‘çœ‹ä»–çš„åå­—æŒºæœ‰è¶£ï¼Œè€Œä¸”éš”ç€åŠåœºæ‘¸ä»–å®šä¹‰ä¸€ä¸‹èº«ä»½ï¼Œæ˜¯å¸¸è§„æ“ä½œã€‚

### å‘è¨€ç»“æœ ###
\`\`\`json
{
  "reasoning_process":"é¢„è¨€å®¶æ˜¯é‡è¦çš„ç¥èŒï¼Œæˆ‘éœ€è¦è®¤çœŸåˆ†ææ¯ä¸€ä½ç©å®¶çš„å‘è¨€ï¼Œæ‰¾å‡ºç‹¼äººï¼Œå°†ä»–ä»¬æŠ•ç¥¨å¤„å†³ã€‚æˆ‘æ˜¨æ™šæŸ¥éªŒäº†8å·ï¼Œ8å·æ˜¯å¥½äººï¼Œæ‰€ä»¥8å·çš„èº«ä»½å¯ä»¥ç¡®è®¤æ˜¯å¥½äººã€‚",
  "my_speech":"1å·é¢„è¨€å®¶ï¼Œæ˜¨æ™šæŸ¥éªŒ8å·ï¼Œ8å·æ˜¯å¥½äººã€‚å¤§å®¶å¯ä»¥ç›¸ä¿¡8å·çš„å‘è¨€ï¼Œ8å·ä¹Ÿè¯·ä½ å¤šç»™æˆ‘ä»¬å¥½äººå¼€å¼€è§†é‡ï¼Œå¸®æˆ‘ä»¬åˆ†æä¸€ä¸‹åœºä¸Šçš„å±€åŠ¿ã€‚"
}
\`\`\`

### æŸ¥éªŒç»“æœ ###
${checkResult.targetId}å·ç©å®¶çš„èº«ä»½æ˜¯ï¼š${checkResult.isWolf ? 'ç‹¼äºº' : 'å¥½äºº'}

### æŸ¥éªŒåŸå›  ###
${checkResult.reason}

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### å‘è¨€ç»“æœ ###`
}
```

## ğŸ§™â€â™€ï¸ å¥³å·«è§’è‰²æ¨¡æ¿

### å¥³å·«å¤œæ™šæ•‘äººæ¨¡æ¿ï¼ˆç¬¬ä¸€å¤œï¼‰
```javascript
function buildWitchSavePrompt(player, gameInfo, killedPlayer) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯å¥³å·«ã€‚
æ ¹æ®å…¨ç¦æˆ¿è§„åˆ™ï¼Œå¥³å·«ç¬¬ä¸€æ™šå¿…é¡»æ•‘äººï¼Œä½ ç°åœ¨éœ€è¦å†³å®šæ•‘è°ã€‚

æ˜¨æ™šæ­»äº¡çš„ç©å®¶æ˜¯ï¼š${killedPlayer.id}å·ç©å®¶${killedPlayer.nickname}

ä½œä¸ºå¥³å·«ï¼Œä½ æœ‰è§£è¯å’Œæ¯’è¯å„ä¸€ç“¶ã€‚ç¬¬ä¸€æ™šä½ å¿…é¡»ä½¿ç”¨è§£è¯æ•‘äººã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ã€‚

ã€ç¤ºä¾‹ã€‘
### æ¨ç†ç»“æœ ###
\`\`\`json
{
  "save_ids":"${killedPlayer.id}",
  "save_cause":"æ ¹æ®å…¨ç¦æˆ¿è§„åˆ™ï¼Œå¥³å·«ç¬¬ä¸€æ™šå¿…é¡»æ•‘äººï¼Œæˆ‘é€‰æ‹©æ•‘${killedPlayer.id}å·ã€‚"
}
\`\`\`

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### æ¨ç†ç»“æœ ###`
}
```

### å¥³å·«å¤œæ™šç”¨æ¯’æ¨¡æ¿
```javascript
function buildWitchPoisonPrompt(player, gameInfo) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯å¥³å·«ï¼Œè¯·æ ¹æ®å¯¹å±€ä¿¡æ¯ï¼Œå†³å®šæ˜¯å¦è¦åœ¨ä»Šå¤©æ™šä¸Šä½¿ç”¨æ¯’è¯ã€‚

è¯·æ³¨æ„ï¼Œä½ å¯ä»¥é€‰æ‹©ç°åœ¨ç”¨æ¯’ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ˜å¤©æ™šä¸Šå†ç”¨æ¯’ï¼Œè¯·æ ¹æ®ä½ çš„æ¨ç†è‡ªè¡Œåˆ¤æ–­ã€‚
å¦‚æœé€‰æ‹©ç”¨æ¯’ï¼Œè¯·å°†æƒ³è¦æ¯’æ­»çš„ç©å®¶idå‚¨å­˜åœ¨kill_idså¯¹åº”çš„å€¼ä¸­ï¼Œåä¹‹åˆ™kill_idså¯¹åº”çš„å€¼ä¸ºç©ºã€‚
ä½œä¸ºå¥³å·«ï¼Œä½ å¿…é¡»å°½å¯èƒ½çš„å°†æ¯’ç”¨åœ¨ç‹¼äººèº«ä¸Šï¼Œå¸¦é¢†å¥½äººè·å¾—èƒœåˆ©ã€‚
è¯·è¯¦ç»†è¯´æ˜ä½ ä¸ºä»€ä¹ˆè¦æ€æ­»è¿™ä¸ªç©å®¶ï¼Œå¹¶è¯´æ˜ä½ ä¸ºä»€ä¹ˆè®¤ä¸ºæ€æ­»è¿™ä¸ªç©å®¶æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚
è¯·æ³¨æ„ï¼Œä½ è¦å°½é‡é¿å…æ¯’åˆ°çŒäººã€‚
ä½ çš„å›ç­”éœ€è¦ç®€æ´æ˜äº†ï¼Œå°½é‡ä¸è¦è¶…è¿‡200ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ã€‚

ã€ç¤ºä¾‹ä¸€ã€‘
### æ¨ç†ç»“æœ ###
\`\`\`json
{
  "yes_or_no":"no",
  "kill_ids":"",
  "kill_cause":"æˆ‘é€‰æ‹©å†å¬ä¸€æ¬¡å‘è¨€ï¼Œæ˜å¤©æ™šä¸Šå†ç”¨æ¯’ï¼Œä»¥ä¾¿äºæˆ‘å¯ä»¥æ›´å‡†ç¡®çš„æŠŠæ¯’ç”¨åˆ°ç‹¼äººèº«ä¸Šã€‚"
}
\`\`\`

ã€ç¤ºä¾‹äºŒã€‘
### æ¨ç†ç»“æœ ###
\`\`\`json
{
  "yes_or_no":"yes",
  "kill_ids":"5",
  "kill_cause":"æˆ‘é€‰æ‹©æ¯’æ­»5å·ï¼ŒåŸå› å¦‚ä¸‹ï¼š1.å‘è¨€ï¼š5å·çš„å‘ç°ç›¸å¯¹å…¶å®ƒç©å®¶æ¥è¯´ï¼Œæ¯”è¾ƒå·®ï¼Œå‘è¨€ä¸è¯šæ³ï¼Œä¹Ÿæ²¡æœ‰ç»™æˆ‘ä»¬å¥½äººå¼€è§†é‡ã€‚2.ç¥¨å‹ï¼š5å·å°†ç¥¨æŠ•åœ¨äº†æˆ‘è®¤ä¸ºæ˜¯å¥½äººç©å®¶å¯èƒ½æ€§æ¯”è¾ƒå¤§çš„ç©å®¶èº«ä¸Šï¼Œæ‰€ä»¥æˆ‘è§‰å¾—ä»–æ˜¯ç‹¼ã€‚"
}
\`\`\`

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### æ¨ç†ç»“æœ ###`
}
```

### å¥³å·«ç™½å¤©å‘è¨€æ¨¡æ¿
```javascript
function buildWitchSpeechPrompt(player, speakOrder, gameInfo, actionHistory) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯å¥³å·«ï¼Œè¯·æ ¹æ®æ¸¸æˆè§„åˆ™ã€æ¸¸æˆå¸¸ç”¨è¯­ã€å…¨ç¦æˆ¿è§„åˆ™ã€å¯¹å±€ä¿¡æ¯å’Œæ¨ç†è¿‡ç¨‹è¿›è¡Œå‘è¨€ã€‚

ä½ æ˜¯ç¬¬${speakOrder}ä¸ªå‘è¨€çš„ç©å®¶ã€‚
ä½ éœ€è¦æ ¹æ®å¯¹å±€ä¿¡æ¯è¿›è¡Œæ¨ç†ï¼Œæ‰¾å‡ºå‘è¨€æœ‰æ¼æ´æˆ–æœ‰ç‹¼äººå«Œç–‘çš„ç©å®¶ï¼Œæ‰¾å‡ºç‹¼äººï¼Œå¸¦é¢†å¥½äººèƒœåˆ©ã€‚
è¯·è¯¦ç»†è¯´æ˜ä½ çš„æ¨ç†è¿‡ç¨‹ã€‚
ä½ çš„å‘è¨€éœ€è¦ç®€æ´æ˜äº†ï¼Œæœ€å¥½ä¸è¦è¶…è¿‡100ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ï¼Œå¹¶ä¸”å°†å‘è¨€å¯¹åº”my_speechï¼Œæ¨ç†å¯¹åº”reasoning_processã€‚

ã€ç¤ºä¾‹ä¸€ã€‘
### ç”¨è¯ç»“æœ ###
æ˜¨æ™šæ•‘äº†6å·ï¼Œ6å·æ˜¯æˆ‘çš„é“¶æ°´ã€‚

### å‘è¨€ç»“æœ ###
\`\`\`json
{
  "reasoning_process":"å¥³å·«æ˜¯é‡è¦çš„ç¥èŒï¼Œæˆ‘éœ€è¦è®¤çœŸåˆ†ææ¯ä¸€ä½ç©å®¶çš„å‘è¨€ï¼Œæ‰¾å‡ºç‹¼äººï¼Œå°†ä»–ä»¬æ¯’æ­»æˆ–è€…å·å¬å¥½äººæŠ•ç¥¨å¤„å†³ä»–ä»¬ã€‚å› ä¸ºç›®å‰åªæœ‰7å·å’Œ8å·å‘è¨€ï¼Œé¢„è¨€å®¶è¿˜æ²¡æœ‰æŠ¥æŸ¥éªŒï¼Œåé¢è¿˜æœ‰1å·åˆ°6å·ç©å®¶æ²¡æœ‰å‘è¨€ï¼Œæ‰€ä»¥æš‚æ—¶æ— æ³•ç»™å‡ºæ˜ç¡®çš„æŠ•ç¥¨å»ºè®®ã€‚ä½†æ˜¯æˆ‘å¯ä»¥å§”æ‰˜6å·ç©å®¶ç»™å‡ºæ˜ç¡®çš„æŠ•ç¥¨å»ºè®®ï¼Œå› ä¸ºå…¨ç¦æˆ¿è§„åˆ™æ˜¯ç‹¼äººä¸å¯ä»¥ç»™ç‹¼äººå‘é‡‘é“¶æ°´ï¼Œæ‰€ä»¥6å·è‚¯å®šæ˜¯å¥½äººï¼Œè®©6å·å½’ç¥¨æ˜¯åˆç†çš„ã€‚",
  "my_speech":"9å·å¥³å·«ï¼Œæ˜¨æ™šæ•‘äº†6å·ï¼Œ6å·æ˜¯æˆ‘çš„é“¶æ°´ã€‚ç›®å‰é¢„è¨€å®¶è¿˜æ²¡å‡ºæ¥ï¼Œç­‰é¢„è¨€å®¶æŠ¥å®ŒæŸ¥éªŒï¼Œ6å·ä½ å½’ä¸ªç¥¨ã€‚"
}
\`\`\`

### ç”¨è¯ç»“æœ ###
${actionHistory.lastNightAction}

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### å‘è¨€ç»“æœ ###`
}
```

## ğŸ¹ çŒäººè§’è‰²æ¨¡æ¿

### çŒäººç™½å¤©å‘è¨€æ¨¡æ¿
```javascript
function buildHunterSpeechPrompt(player, speakOrder, gameInfo) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯çŒäººï¼Œè¯·æ ¹æ®æ¸¸æˆè§„åˆ™ã€æ¸¸æˆå¸¸ç”¨è¯­ã€å…¨ç¦æˆ¿è§„åˆ™ã€å¯¹å±€ä¿¡æ¯å’Œæ¨ç†è¿‡ç¨‹è¿›è¡Œå‘è¨€ã€‚

ä½ æ˜¯ç¬¬${speakOrder}ä¸ªå‘è¨€çš„ç©å®¶ã€‚
ä½ éœ€è¦æ ¹æ®å·²çŸ¥ç©å®¶ä¿¡æ¯è¿›è¡Œæ¨ç†ï¼Œæ‰¾å‡ºå‘è¨€æœ‰æ¼æ´æˆ–æœ‰ç‹¼äººå«Œç–‘çš„ç©å®¶ï¼Œæ‰¾å‡ºç‹¼äººï¼Œå¸¦é¢†å¥½äººèƒœåˆ©ã€‚
è¯·è¯¦ç»†è¯´æ˜ä½ çš„æ¨ç†è¿‡ç¨‹ã€‚
ä½ çš„å‘è¨€éœ€è¦ç®€æ´æ˜äº†ï¼Œæœ€å¥½ä¸è¦è¶…è¿‡100ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ï¼Œå¹¶ä¸”å°†å‘è¨€å¯¹åº”my_speechï¼Œæ¨ç†å¯¹åº”reasoning_processã€‚

ã€ç¤ºä¾‹ä¸€ã€‘
### å‘è¨€ç»“æœ ###
\`\`\`json
{
  "reasoning_process":"çŒäººæ˜¯é‡è¦çš„ç¥èŒï¼Œè¿‡æ—©çš„æš´éœ²èº«ä»½ï¼Œä¼šè®©ç‹¼äººå¾ˆå®¹æ˜“å–å¾—èƒœåˆ©ï¼Œæ‰€ä»¥æˆ‘åº”è¯¥ä»¥æ‘æ°‘èº«ä»½å°½é‡è—å¥½è‡ªå·±ï¼Œé¿å…ç‹¼äººç¡®å®šæˆ‘çš„èº«ä»½ã€‚æˆ‘çš„æŠ€èƒ½æ˜¯æ­»äº¡åå¯ä»¥å¼€æªæ‰“æ­»ä»»æ„ç©å®¶ï¼Œæ‰€ä»¥æˆ‘å¹¶ä¸ç”¨å¤ªæ‹…å¿ƒè‡ªå·±è¢«ç¥¨æ­»ã€‚ä½†æ˜¯ä¸ºäº†é¿å…å¥³å·«æ’’æ¯’æ’’åˆ°æˆ‘èº«ä¸Šï¼Œå¯¼è‡´æˆ‘çš„æŠ€èƒ½ç”¨ä¸å‡ºæ¥ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯åº”è¯¥è®¤çœŸå‘è¨€ï¼Œè®©å¥³å·«å’Œå¥½äººç›¸ä¿¡æˆ‘æ˜¯å¥½äººã€‚",
  "my_speech":"9å·æ‘æ°‘ï¼Œå·²çŸ¥ä¿¡æ¯ï¼Œ7å·æŠ¥æ‘æ°‘ï¼Œ8å·æŠ¥æ‘æ°‘ï¼Œè€Œæˆ‘ä¹Ÿæ˜¯æ‘æ°‘ï¼Œæ‘æ°‘çš„èº«ä»½å·²ç»æ»¡äº†ï¼Œåé¢å¦‚æœæœ‰æŠ¥æ‘æ°‘çš„ï¼Œå°±è¦å¥½å¥½å‘è¨€è¯æ˜è‡ªå·±çš„èº«ä»½äº†ã€‚ç›®å‰æ²¡æœ‰å¤ªå¤šä¿¡æ¯å¯ä»¥ç»™åˆ°å¥½äººä»¬å‚è€ƒï¼Œå¬å¬åé¢é¢„è¨€å®¶å’Œå¥³å·«æ€ä¹ˆè¯´å§ã€‚"
}
\`\`\`

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### å‘è¨€ç»“æœ ###`
}
```

### çŒäººå¼€æªæ¨¡æ¿
```javascript
function buildHunterShootPrompt(player, gameInfo) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯çŒäººï¼Œä½ å·²ç»è¢«æŠ•ç¥¨å‡ºå±€äº†ï¼Œç°åœ¨å¯ä»¥å¼€æªå°„æ€ä¸€åç©å®¶ã€‚

ä½œä¸ºçŒäººï¼Œä½ å¿…é¡»å°½å¯èƒ½çš„æ€æ­»ç‹¼äººï¼Œå¸¦é¢†å¥½äººè·å¾—èƒœåˆ©ã€‚
è¯·è¯¦ç»†è¯´æ˜ä½ ä¸ºä»€ä¹ˆè¦æ€æ­»è¿™ä¸ªç©å®¶ï¼Œå¹¶è¯´æ˜ä½ ä¸ºä»€ä¹ˆè®¤ä¸ºæ€æ­»è¿™ä¸ªç©å®¶æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚
è¯·æ³¨æ„ï¼Œä½ ä¸èƒ½æ‰“æ­»å·²ç»æ­»äº¡çš„ç©å®¶ã€‚
ä½ çš„å›ç­”éœ€è¦ç®€æ´æ˜äº†ï¼Œå°½é‡ä¸è¦è¶…è¿‡200ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ã€‚

ã€ç¤ºä¾‹ä¸€ã€‘
### å‘è¨€ç»“æœ ###
\`\`\`json
{
  "shot_ids":"6",
  "shot_cause":"æˆ‘æ˜¯çœŸçŒäººï¼Œ6å·æŸ¥æ€æˆ‘ï¼Œé‚£ä»–è‚¯å®šæ˜¯ç‹¼äººå‡å†’çš„é¢„è¨€å®¶ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥æ‰“æ­»ä»–ï¼Œå‰©ä¸‹çš„ç‹¼äººå°±é ä½ ä»¬è‡ªå·±æ‰¾äº†ã€‚"
}
\`\`\`

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### å‘è¨€ç»“æœ ###`
}
```

## ğŸº ç‹¼äººè§’è‰²æ¨¡æ¿

### ç‹¼äººå¤œæ™šåå•†æ¨¡æ¿
```javascript
function buildWerewolfNightPrompt(player, gameInfo, teammates, teamStrategies) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯ç‹¼äººï¼Œè¯·æ ¹æ®æ¸¸æˆè§„åˆ™å’Œå¯¹å±€ä¿¡æ¯ï¼ŒæŒ‡å®šä¸€ä½ä½ æƒ³æ€æ­»çš„å¥½äººé˜µè¥ç©å®¶ï¼Œå¹¶è¯´æ˜ä¸ºä»€ä¹ˆã€‚

ä½ çš„å¦å¤–ä¸¤åé˜Ÿå‹åˆ†åˆ«æ˜¯${teammates.join('ã€')}ï¼Œä½ ä»¬3ä¸ªå±äºç‹¼äººé˜µè¥ï¼Œå…¶å®ƒåº§ä½å·å±äºå¥½äººé˜µè¥ã€‚
ä½œä¸ºç‹¼äººï¼Œä½ å¿…é¡»å–„äºå›¢é˜Ÿåä½œï¼Œä¸å¦å¤–ä¸¤åé˜Ÿå‹å…±åŒåˆ¶å®šæ¸¸æˆç­–ç•¥å¹¶ç»Ÿä¸€è¡ŒåŠ¨ï¼Œé€šè¿‡é»˜å¥‘çš„é…åˆï¼Œä»¥æé«˜è·èƒœçš„å‡ ç‡ã€‚
è¯·æ³¨æ„ï¼Œä½ éœ€è¦é€‰æ‹©èµåŒæˆ–è€…ä¸èµåŒæŸä¸ªé˜Ÿå‹çš„ç­–ç•¥ã€‚
å¦‚æœä½ èµåŒæŸä¸ªé˜Ÿå‹çš„ç­–ç•¥ï¼Œä½ å¯ä»¥ç®€ç•¥çš„è¯´èµåŒï¼Œä¹Ÿå¯ä»¥åœ¨è¯¥é˜Ÿå‹çš„ç­–ç•¥ä¸Šè¡¥å……ä½ è‡ªå·±çš„æƒ³æ³•ã€‚
å¦‚æœä¸¤ä¸ªé˜Ÿå‹çš„ç­–ç•¥ä½ éƒ½ä¸èµåŒï¼Œè¯·è¯´å‡ºä½ è‡ªå·±çš„æ¸¸æˆç­–ç•¥ã€‚
ä½ çš„è¾“å‡ºç»“æœéœ€è¦ç®€æ´æ˜äº†ï¼Œå°½é‡ä¸è¦è¶…è¿‡300ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ï¼Œå¹¶ä¸”å°†æƒ³æ€æ­»çš„ç©å®¶idå¯¹åº”kill_playerï¼Œæ¸¸æˆç­–ç•¥å¯¹åº”my_strategyã€‚

### è¾“å…¥ ###
team:ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„å¦å¤–ä¸¤åé˜Ÿå‹åˆ†åˆ«æ˜¯${teammates.join('ã€')}ã€‚
${teamStrategies.map(s => `team_strategy:${s.playerId}å·ç©å®¶æƒ³æ€æ­»çš„ç©å®¶æ˜¯${s.targetId}ï¼Œä»–çš„æ¸¸æˆç­–ç•¥å¦‚ä¸‹ï¼š\n${s.strategy}`).join('\n')}

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### è¾“å‡º ###`
}
```

### ç‹¼äººç™½å¤©å‘è¨€æ¨¡æ¿
```javascript
function buildWerewolfSpeechPrompt(player, speakOrder, gameInfo, teammates, lastNightTarget) {
  return `ä½ æ˜¯ç¬¬${speakOrder}ä¸ªå‘è¨€çš„ç©å®¶ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„å‘è¨€ä¸èƒ½æš´éœ²ä½ çš„èº«ä»½æ˜¯ç‹¼äººï¼Œæ›´ä¹Ÿä¸èƒ½æš´éœ²æ˜¨æ™šä½ ä»¬è¢­å‡»äº†å“ªä½ç©å®¶ã€‚
ä¸ºäº†éšè—èº«ä»½ï¼Œä½ å¯ä»¥è¯´è‡ªå·±æ˜¯æ‘æ°‘ã€‚
ä¸ºäº†è¿·æƒ‘å¥½äººç©å®¶ï¼Œä½ å¯ä»¥å†’å……é¢„è¨€å®¶ã€å¥³å·«æˆ–è€…çŒäººçš„ç¥èŒèº«ä»½è¿›è¡Œå‘è¨€ï¼Œè®©å¥½äººç›¸ä¿¡ä½ ä½ ï¼ŒæŠŠçœŸæ­£çš„é¢„è¨€å®¶æˆ–è€…å¥³å·«æŠ•ç¥¨å¤„å†³ã€‚
è¯·æ³¨æ„ï¼Œå½“ä½ å†’å……é¢„è¨€å®¶æˆ–è€…å¥³å·«å‘è¨€æ—¶ï¼Œå¿…é¡»éµå®ˆå…¨ç¦æˆ¿è§„åˆ™ã€‚
ä¸ºäº†å–å¾—èƒœåˆ©ï¼Œä½ å¯ä»¥è¯¬é™·å¥½äººç©å®¶æ˜¯ç‹¼äººã€‚
ä¸ºäº†è®©ä½ å–å¾—å¥½äººçš„ä¿¡ä»»ï¼Œä½ ä¹Ÿå¯ä»¥å‡è®¾è‡ªå·±æ˜¯å¥½äººï¼Œç§¯æåˆ†æå…¶ä»–ç©å®¶çš„å‘è¨€ï¼Œå¸®å¥½äººç©å®¶æ‰¾å‡ºç‹¼äººã€‚
è¯·è¯¦ç»†è¯´æ˜ä½ çš„æ¨ç†è¿‡ç¨‹ã€‚
ä½ çš„å‘è¨€éœ€è¦ç®€æ´æ˜äº†ï¼Œæœ€å¥½ä¸è¦è¶…è¿‡300ä¸ªæ±‰å­—ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ï¼Œå¹¶ä¸”å°†å‘è¨€my_strategyï¼Œæ¨ç†å¯¹åº”reasoning_processã€‚

### ç‹¼é˜Ÿä¼ ###
${player.id}å·ç©å®¶${player.nickname}ã€${teammates.join('ã€')}ã€‚

### è¢­å‡»ç›®æ ‡ ###
${lastNightTarget}å·ã€‚

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### å‘è¨€ç»“æœ ###`
}
```

### ç‹¼äººæŠ•ç¥¨æ¨¡æ¿
```javascript
function buildWerewolfVotePrompt(player, gameInfo, teammates) {
  return `ä½ æ˜¯${player.id}å·ç©å®¶${player.nickname}ï¼Œä½ çš„æ¸¸æˆè§’è‰²æ˜¯ç‹¼äººã€‚
è¯·æ³¨æ„ï¼Œä½ éœ€è¦ä»¥ç‹¼äººçš„èº«ä»½å’Œè§’åº¦å»æŠ•ç¥¨ã€‚
ä½ å¯ä»¥æŠ•ç»™å¥½äººä»¬è®¤ä¸ºç‹¼äººå«Œç–‘æœ€å¤§çš„ç©å®¶ï¼Œå°†å¥½äººç©å®¶æŠ•ç¥¨å‡ºå±€ã€‚
ä¹Ÿå¯ä»¥æŠ•ç»™è‡ªå·±çš„ç‹¼é˜Ÿå‹ï¼Œä»¥è¿·æƒ‘å¥½äººï¼Œè®©ä»–ä»¬ä»¥ä¸ºä½ å’Œç‹¼é˜Ÿå‹ä¸æ˜¯ä¸€ä¼™çš„ã€‚
ä½ éœ€è¦é‡‡çº³ç¡®å®šèº«ä»½çš„å¥½äººç©å®¶çš„æŠ•ç¥¨å»ºè®®ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œä½ çš„èº«ä»½æ˜¯ç‹¼äººï¼Œä½ çš„ç›®æ ‡æ˜¯æ€æ­»å¥½äººç©å®¶å–å¾—èƒœåˆ©ã€‚
ä½œä¸ºç‹¼äººï¼Œä½ è¿˜éœ€è¦æƒ³å‡ºä¸€ä¸ªè¿·æƒ‘å¥½äººçš„ç†ç”±ï¼Œç”¨æ¥è§£é‡Šä½ ä¸ºä»€ä¹ˆæŠ•ç¥¨ç»™å¯¹åº”çš„ç©å®¶ã€‚
è¯·æ³¨æ„ï¼Œä½ çš„è¾“å‡ºå¿…é¡»ä¸ºå¯è§£æçš„jsonæ ¼å¼ï¼Œå¹¶ä¸”å°†æŠ•ç¥¨å¯¹åº”voteï¼ŒåŸå› å¯¹åº”vote_causeã€‚

ã€ç¤ºä¾‹ä¸€ã€‘
### æ¨ç†ç»“æœ ###
\`\`\`json
{
  "vote":"7",
  "vote_cause":"ä½œä¸ºç‹¼äººï¼Œæˆ‘éœ€è¦æ˜é¢ä¸Šé‡‡çº³ç¥èŒæˆ–è€…ç¡®å®šèº«ä»½çš„å¥½äººçš„æŠ•ç¥¨å»ºè®®ï¼Œè¿™ä¸€è½®å‘è¨€ï¼Œå¥³å·«å»ºè®®ä»3å·å’Œ7å·ä¸­é€‰æ‹©ä¸€ä¸ªæŠ•ç¥¨ï¼Œè€Œ3å·æ˜¯æˆ‘çš„ç‹¼é˜Ÿå‹ï¼Œåœ¨å¥½äººä¸ç¡®å®š3å·å’Œ7å·è°æ˜¯ç‹¼äººçš„æƒ…å†µä¸‹ï¼Œæˆ‘é€‰æ‹©æŠ•7å·ï¼Œå°†å¥½äººç©å®¶æŠ•ç¥¨å‡ºå±€ã€‚",
  "wolf_vote_cause":"æˆ‘è§‰å¾—7å·ç©å®¶çš„å‘è¨€è‡ªç›¸çŸ›ç›¾ï¼Œä¸åƒæ˜¯ä¸€ä¸ªå¥½äººç©å®¶çš„å‘è¨€ï¼Œç›¸æ¯”3å·ç©å®¶æ¥è¯´ï¼Œå¬æ„Ÿæ¯”è¾ƒå·®ï¼Œæ‰€ä»¥æˆ‘æŠ•äº†7å·ã€‚"
}
\`\`\`

### ç‹¼é˜Ÿå‹ ###
${teammates.join('ã€')}

### å¯¹å±€ä¿¡æ¯ ###
${gameInfo}

### æ¨ç†ç»“æœ ###`
}
```

## ğŸ“Š æ•°æ®ç»“æ„å®šä¹‰

### ç©å®¶æ•°æ®ç»“æ„
```javascript
const PlayerSchema = {
  id: Number,           // ç©å®¶ç¼–å· 1-9
  nickname: String,     // ç©å®¶æ˜µç§°
  role: String,         // è§’è‰²ï¼šç‹¼äººã€é¢„è¨€å®¶ã€å¥³å·«ã€çŒäººã€æ‘æ°‘
  is_human: Boolean,    // æ˜¯å¦ä¸ºçœŸå®ç©å®¶
  died: Boolean,        // æ˜¯å¦æ­»äº¡
  died_cause: String,   // æ­»äº¡åŸå› ï¼šç‹¼äººã€å¥³å·«ã€æŠ•ç¥¨ã€çŒäºº
  died_round: Number,   // æ­»äº¡è½®æ¬¡
  speak_history: [      // å‘è¨€å†å²
    {
      round_id: Number,
      content: String
    }
  ],
  vote_history: [       // æŠ•ç¥¨å†å²
    {
      round_id: Number,
      target_id: Number
    }
  ],
  action_history: [     // è¡ŒåŠ¨å†å²ï¼ˆç¥èŒä¸“ç”¨ï¼‰
    {
      round_id: Number,
      target_id: Number,
      strategy: String,
      is_wolf: Boolean  // é¢„è¨€å®¶æŸ¥éªŒç»“æœ
    }
  ]
}
```

### æ¸¸æˆçŠ¶æ€æ•°æ®ç»“æ„
```javascript
const GameStateSchema = {
  round_id: Number,         // å½“å‰è½®æ¬¡
  phase: String,            // å½“å‰é˜¶æ®µï¼šnightã€day_speechã€day_vote
  players: [PlayerSchema],  // ç©å®¶åˆ—è¡¨
  night_actions: [          // å¤œæ™šè¡ŒåŠ¨è®°å½•
    {
      player_id: Number,
      action_type: String,  // killã€checkã€saveã€poisonã€guard
      target_id: Number,
      success: Boolean
    }
  ],
  day_votes: [             // ç™½å¤©æŠ•ç¥¨è®°å½•
    {
      voter_id: Number,
      target_id: Number
    }
  ],
  game_logs: [             // æ¸¸æˆæ—¥å¿—
    {
      round_id: Number,
      type: String,        // deathã€speechã€voteã€skill
      content: String,
      is_public: Boolean
    }
  ]
}
```

### AIå“åº”æ•°æ®ç»“æ„
```javascript
const AIResponseSchema = {
  // å‘è¨€ç›¸å…³
  my_speech: String,          // AIå‘è¨€å†…å®¹
  reasoning_process: String,  // æ¨ç†è¿‡ç¨‹
  
  // é—è¨€ç›¸å…³
  last_words: String,         // é—è¨€å†…å®¹
  
  // é¢„è¨€å®¶æŸ¥éªŒ
  check_ids: String,          // æŸ¥éªŒç›®æ ‡ID
  check_cause: String,        // æŸ¥éªŒåŸå› 
  
  // å¥³å·«ç”¨è¯
  yes_or_no: String,          // æ˜¯å¦ç”¨è¯ï¼š"yes"/"no"
  kill_ids: String,          // æ¯’æ€ç›®æ ‡ID
  kill_cause: String,        // ç”¨æ¯’åŸå› 
  save_ids: String,          // æ•‘äººç›®æ ‡ID
  save_cause: String,        // æ•‘äººåŸå› 
  
  // çŒäººå¼€æª
  shot_ids: String,          // å°„å‡»ç›®æ ‡ID
  shot_cause: String,        // å°„å‡»åŸå› 
  
  // ç‹¼äººè¡ŒåŠ¨
  kill_player: String,       // å‡»æ€ç›®æ ‡ID
  my_strategy: String,       // ç‹¼äººç­–ç•¥
  
  // æŠ•ç¥¨ç›¸å…³
  vote: String,              // æŠ•ç¥¨ç›®æ ‡ID
  vote_cause: String,        // æŠ•ç¥¨åŸå› 
  wolf_vote_cause: String    // ç‹¼äººæŠ•ç¥¨çš„è¡¨é¢åŸå› 
}
```

## ğŸ”§ ä½¿ç”¨è¯´æ˜

### 1. Promptæ„å»ºå‡½æ•°ç¤ºä¾‹
```javascript
// æ„å»ºæ‘æ°‘å‘è¨€prompt
function buildVillagerPrompt(player, speakOrder, gameInfo) {
  return buildVillagerSpeechPrompt(player, speakOrder, gameInfo)
}

// æ„å»ºé¢„è¨€å®¶æŸ¥éªŒprompt
function buildSeerPrompt(player, gameInfo) {
  return buildSeerCheckPrompt(player, gameInfo)
}

// æ„å»ºç‹¼äººåå•†prompt
function buildWerewolfPrompt(player, gameInfo, teammates, strategies) {
  return buildWerewolfNightPrompt(player, gameInfo, teammates, strategies)
}
```

### 2. AIå“åº”è§£æç¤ºä¾‹
```javascript
// è§£æAIå“åº”
function parseAIResponse(response) {
  try {
    // æå–JSONéƒ¨åˆ†
    const jsonMatch = response.match(/```json\n([\s\S]*?)\n```/)
    if (jsonMatch) {
      return JSON.parse(jsonMatch[1])
    }
    
    // ç›´æ¥è§£æJSON
    return JSON.parse(response)
  } catch (error) {
    console.error('AIå“åº”è§£æå¤±è´¥:', error)
    return null
  }
}
```

### 3. æ¸¸æˆçŠ¶æ€æ›´æ–°ç¤ºä¾‹
```javascript
// æ›´æ–°ç©å®¶å‘è¨€å†å²
function addSpeakHistory(playerId, content) {
  const player = findPlayer(playerId)
  player.speak_history.push({
    round_id: currentRound,
    content: content
  })
}

// æ›´æ–°ç©å®¶æ­»äº¡çŠ¶æ€
function killPlayer(playerId, cause) {
  const player = findPlayer(playerId)
  player.died = true
  player.died_cause = cause
  player.died_round = currentRound
}
```

---

**æ¨¡æ¿ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2024å¹´12æœˆ  
**ä½œè€…**: AIGameå¼€å‘å›¢é˜Ÿ 